<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
        .loading { background: #fff3cd; }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h1>
    
    <div id="tests">
        <div class="test loading">‚è≥ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤...</div>
    </div>

    <script>
        const testsDiv = document.getElementById('tests');
        
        function addTest(name, status, message) {
            const div = document.createElement('div');
            div.className = `test ${status}`;
            div.innerHTML = `<strong>${name}:</strong> ${message}`;
            testsDiv.appendChild(div);
        }
        
        async function runTests() {
            // –û—á–∏—Å—Ç–∏—Ç—å loading
            testsDiv.innerHTML = '';
            
            // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ user.php
            try {
                const start = performance.now();
                const userRes = await fetch('/muzic2/src/api/user.php', { credentials: 'include' });
                const userData = await userRes.json();
                const time = Math.round(performance.now() - start);
                
                if (userRes.ok) {
                    addTest('user.php', 'success', `‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (${time}ms) - –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: ${userData.authenticated ? 'YES' : 'NO'}`);
                } else {
                    addTest('user.php', 'error', `‚ùå –û—à–∏–±–∫–∞ ${userRes.status}: ${userData.error || 'Unknown error'}`);
                }
            } catch (e) {
                addTest('user.php', 'error', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${e.message}`);
            }
            
            // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ home.php
            try {
                const start = performance.now();
                const homeRes = await fetch('/muzic2/public/src/api/home.php', { credentials: 'include' });
                const homeData = await homeRes.json();
                const time = Math.round(performance.now() - start);
                
                if (homeRes.ok) {
                    const tracks = homeData.tracks ? homeData.tracks.length : 0;
                    const albums = homeData.albums ? homeData.albums.length : 0;
                    const artists = homeData.artists ? homeData.artists.length : 0;
                    addTest('home.php', 'success', `‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (${time}ms) - –¢—Ä–µ–∫–æ–≤: ${tracks}, –ê–ª—å–±–æ–º–æ–≤: ${albums}, –ê—Ä—Ç–∏—Å—Ç–æ–≤: ${artists}`);
                } else {
                    addTest('home.php', 'error', `‚ùå –û—à–∏–±–∫–∞ ${homeRes.status}: ${homeData.error || 'Unknown error'}`);
                }
            } catch (e) {
                addTest('home.php', 'error', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${e.message}`);
            }
            
            // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ likes.php
            try {
                const start = performance.now();
                const likesRes = await fetch('/muzic2/src/api/likes.php', { credentials: 'include' });
                const likesData = await likesRes.json();
                const time = Math.round(performance.now() - start);
                
                if (likesRes.ok) {
                    const tracks = likesData.tracks ? likesData.tracks.length : 0;
                    const albums = likesData.albums ? likesData.albums.length : 0;
                    addTest('likes.php', 'success', `‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç (${time}ms) - –õ–∞–π–∫–æ–≤ —Ç—Ä–µ–∫–æ–≤: ${tracks}, –õ–∞–π–∫–æ–≤ –∞–ª—å–±–æ–º–æ–≤: ${albums}`);
                } else {
                    addTest('likes.php', 'error', `‚ùå –û—à–∏–±–∫–∞ ${likesRes.status}: ${likesData.error || 'Unknown error'}`);
                }
            } catch (e) {
                addTest('likes.php', 'error', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${e.message}`);
            }
            
            // –¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ app.js
            try {
                const appRes = await fetch('/muzic2/public/assets/js/app.js');
                if (appRes.ok) {
                    addTest('app.js', 'success', '‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è');
                } else {
                    addTest('app.js', 'error', `‚ùå –û—à–∏–±–∫–∞ ${appRes.status}`);
                }
            } catch (e) {
                addTest('app.js', 'error', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${e.message}`);
            }
            
            // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            try {
                const start = performance.now();
                const mainRes = await fetch('/muzic2/public/index.php');
                const time = Math.round(performance.now() - start);
                
                if (mainRes.ok) {
                    addTest('index.php', 'success', `‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (${time}ms)`);
                } else {
                    addTest('index.php', 'error', `‚ùå –û—à–∏–±–∫–∞ ${mainRes.status}`);
                }
            } catch (e) {
                addTest('index.php', 'error', `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${e.message}`);
            }
            
            // –ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            const allTests = testsDiv.querySelectorAll('.test');
            const successCount = testsDiv.querySelectorAll('.test.success').length;
            const totalCount = allTests.length;
            
            const summary = document.createElement('div');
            summary.className = `test ${successCount === totalCount ? 'success' : 'error'}`;
            summary.innerHTML = `<strong>üìä –ò—Ç–æ–≥–æ:</strong> ${successCount}/${totalCount} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ`;
            testsDiv.appendChild(summary);
        }
        
        // –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        runTests();
    </script>
</body>
</html>
