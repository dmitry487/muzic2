<!DOCTYPE html>
<html>
<head>
    <title>Windows Test</title>
</head>
<body>
    <h1>Windows Detection Test</h1>
    <div id="result"></div>
    
    <script>
        const isWindows = navigator.userAgent.indexOf('Windows') !== -1;
        document.getElementById('result').innerHTML = `
            <p>User Agent: ${navigator.userAgent}</p>
            <p>isWindows: ${isWindows}</p>
            <p>Platform: ${navigator.platform}</p>
        `;
        
        if (isWindows) {
            console.log('Windows detected - testing API');
            fetch('/muzic2/src/api/home_windows.php')
                .then(res => res.json())
                .then(data => {
                    console.log('Windows API response:', data);
                    document.getElementById('result').innerHTML += `
                        <h3>Windows API Test:</h3>
                        <p>Tracks: ${data.tracks ? data.tracks.length : 0}</p>
                        <p>First track cover: ${data.tracks && data.tracks[0] ? data.tracks[0].cover : 'none'}</p>
                    `;
                })
                .catch(err => {
                    console.error('Windows API error:', err);
                    document.getElementById('result').innerHTML += `<p style="color: red;">API Error: ${err.message}</p>`;
                });
        } else {
            console.log('Not Windows - testing regular API');
            fetch('/muzic2/public/src/api/home.php?limit_tracks=1')
                .then(res => res.json())
                .then(data => {
                    console.log('Regular API response:', data);
                    document.getElementById('result').innerHTML += `
                        <h3>Regular API Test:</h3>
                        <p>Tracks: ${data.tracks ? data.tracks.length : 0}</p>
                        <p>First track cover: ${data.tracks && data.tracks[0] ? data.tracks[0].cover : 'none'}</p>
                    `;
                })
                .catch(err => {
                    console.error('Regular API error:', err);
                    document.getElementById('result').innerHTML += `<p style="color: red;">API Error: ${err.message}</p>`;
                });
        }
    </script>
</body>
</html>
