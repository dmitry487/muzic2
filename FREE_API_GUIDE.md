# üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ API –¥–ª—è –º—É–∑—ã–∫–∏

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ API

### 1. **iTunes Search API** ‚≠ê (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π** - –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∫–ª—é—á–∞
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–π** - –Ω–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
- ‚úÖ **–ù–∞–¥—ë–∂–Ω—ã–π** - —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úÖ **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞—Ä—Ç–∏—Å—Ç, –∞–ª—å–±–æ–º, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∂–∞–Ω—Ä, –≥–æ–¥
- ‚úÖ **–û–±–ª–æ–∂–∫–∏**: –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ (–¥–æ 600x600)
- ‚ùå **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: —Ç–æ–ª—å–∫–æ –º—É–∑—ã–∫–∞ –∏–∑ iTunes Store

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$url = "https://itunes.apple.com/search?term=artist+title&media=music&limit=1";
```

### 2. **MusicBrainz** üìö
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π** - –æ—Ç–∫—Ä—ã—Ç–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–û–≥—Ä–æ–º–Ω–∞—è –±–∞–∑–∞** - –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ**
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç User-Agent** —Å –∫–æ–Ω—Ç–∞–∫—Ç–æ–º
- ‚ö†Ô∏è **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ** —á–µ–º iTunes

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$url = "https://musicbrainz.org/ws/2/recording/?query=recording:\"title\" AND artist:\"artist\"&fmt=json";
```

### 3. **Cover Art Archive** üñºÔ∏è
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π** - —á–∞—Å—Ç—å MusicBrainz
- ‚úÖ **–í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ** –æ–±–ª–æ–∂–µ–∫
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç MBID** (MusicBrainz ID)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```php
$url = "https://coverartarchive.org/release/{mbid}/front-500";
```

### 4. **Last.fm API** üéµ
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π** - –Ω—É–∂–µ–Ω API –∫–ª—é—á (–ª–µ–≥–∫–æ –ø–æ–ª—É—á–∏—Ç—å)
- ‚úÖ **–û–±–ª–æ–∂–∫–∏ –∞–ª—å–±–æ–º–æ–≤**
- ‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –Ω–∞ last.fm/api

**–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://www.last.fm/api
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
4. –ó–∞–º–µ–Ω–∏—Ç–µ `YOUR_LASTFM_API_KEY` –≤ `music_metadata.php`

### 5. **Spotify API** üéß
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π** - –Ω—É–∂–µ–Ω API –∫–ª—é—á
- ‚úÖ **–û–≥—Ä–æ–º–Ω–∞—è –±–∞–∑–∞** —Ç—Ä–µ–∫–æ–≤
- ‚úÖ **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –æ–±–ª–æ–∂–∫–∏**
- ‚ùå **–¢–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –Ω–µ —Å–∞–º–∏ —Ç—Ä–µ–∫–∏
- ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç OAuth** –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
–û—Ç–∫—Ä–æ–π—Ç–µ: `/muzic2/public/admin/metadata_fetcher.html`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- üîç –ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤ —á–µ—Ä–µ–∑ iTunes
- üì• –ü–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤

### 2. API –Ω–∞–ø—Ä—è–º—É—é

**–ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:**
```javascript
fetch('/muzic2/src/api/music_metadata.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        action: 'get_metadata',
        title: 'Bohemian Rhapsody',
        artist: 'Queen',
        album: 'A Night at the Opera'
    })
})
```

**–ü–æ–∏—Å–∫ —Ç—Ä–µ–∫–æ–≤:**
```javascript
fetch('/muzic2/src/api/music_metadata.php', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        action: 'search_tracks',
        query: 'Queen Bohemian Rhapsody',
        limit: 10
    })
})
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø–æ–ª–Ω–∏—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
curl http://localhost:8888/muzic2/src/api/auto_fill_metadata.php
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å bulk_add_tracks.php

–ú–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `bulk_add_tracks.php` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API –≤–º–µ—Å—Ç–æ getID3:

```php
// –ü–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞
$apiMetadata = getMetadataFromiTunes($title, $artist);
if ($apiMetadata) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API –µ—Å–ª–∏ –æ–Ω–∏ –ª—É—á—à–µ
    if (empty($album) && !empty($apiMetadata['album'])) {
        $album = $apiMetadata['album'];
    }
    if (empty($cover) && !empty($apiMetadata['cover'])) {
        // –°–∫–∞—á–∏–≤–∞–µ–º –æ–±–ª–æ–∂–∫—É
        downloadCover($apiMetadata['cover'], $coverPath);
    }
}
```

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### Rate Limiting
- **iTunes**: ~20 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ)
- **MusicBrainz**: 1 –∑–∞–ø—Ä–æ—Å/—Å–µ–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **Last.fm**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞—Ä–∏—Ñ–∞ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π: —Ä–∞–∑—É–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. **–ö—ç—à–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏** - –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è MusicBrainz
3. **iTunes –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π** - —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π
4. **Fallback –Ω–∞ –¥—Ä—É–≥–∏–µ API** - –µ—Å–ª–∏ iTunes –Ω–µ –¥–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª—É—á–∏—Ç—å –æ–±–ª–æ–∂–∫—É –¥–ª—è —Ç—Ä–µ–∫–∞
```php
$metadata = getMetadataFromiTunes('Bohemian Rhapsody', 'Queen');
if ($metadata && !empty($metadata['cover'])) {
    // $metadata['cover'] —Å–æ–¥–µ—Ä–∂–∏—Ç URL –æ–±–ª–æ–∂–∫–∏ 600x600
    downloadCover($metadata['cover'], 'tracks/covers/queen_bohemian.jpg');
}
```

### –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
```php
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç –æ–±–ª–æ–∂–∫–∏, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∞–ª—å–±–æ–º—ã
// –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ–∫–æ–≤ —Å –Ω–µ–ø–æ–ª–Ω—ã–º–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
$response = file_get_contents('http://localhost:8888/muzic2/src/api/auto_fill_metadata.php');
$result = json_decode($response, true);
echo "–û–±–Ω–æ–≤–ª–µ–Ω–æ: " . $result['updated'] . " —Ç—Ä–µ–∫–æ–≤";
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ API
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Spotify API
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Discogs API
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –ø–µ—Å–µ–Ω (Lyrics API)


