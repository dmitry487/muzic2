# Установка и запуск приложения Muzic2

## Быстрый старт

### 1. Установка зависимостей

```bash
cd app
npm install
```

### 2. Подготовка контента

Скопируйте весь контент сайта в приложение:

```bash
npm run copy-content
```

Этот скрипт:
- Копирует все файлы из `public/` в `app/content/`
- Копирует треки из `tracks/` в `app/content/tracks/`
- Адаптирует пути в HTML, JS и CSS файлах
- Генерирует базовые API JSON файлы

### 3. Запуск приложения

#### macOS (Electron)

```bash
npm start
```

#### Сборка установщика для macOS

```bash
npm run build:mac
```

Установщик будет в папке `dist/`

### 4. iOS приложение

1. Откройте проект в Xcode:
```bash
open ios/Muzic2App/Muzic2App.xcodeproj
```

2. Убедитесь, что папка `content/` добавлена в проект (см. `ios/README.md`)

3. Соберите и запустите в Xcode

## Структура приложения

```
app/
├── electron/          # Electron приложение (macOS)
│   └── main.js        # Главный файл Electron
├── ios/               # iOS приложение
│   └── Muzic2App/     # Xcode проект
├── content/           # Контент сайта (создается автоматически)
│   ├── assets/        # CSS, JS, изображения
│   ├── tracks/        # Музыкальные файлы
│   └── api/           # JSON файлы для API
├── scripts/           # Скрипты сборки
│   ├── copy-content.js      # Копирование контента
│   ├── adapt-js-for-app.js  # Адаптация JS файлов
│   └── generate-api-json.js # Генерация API JSON
└── package.json       # Конфигурация npm
```

## Важные замечания

1. **Независимость**: Приложение полностью независимо от веб-сайта. Все изменения в `app/` не влияют на основной сайт.

2. **API**: В режиме приложения API работает через статические JSON файлы. Для реальных данных нужно экспортировать их из базы данных.

3. **Треки**: Все музыкальные файлы копируются в приложение, что увеличивает его размер.

4. **Обновления**: Для обновления контента запустите `npm run copy-content` снова.

## Решение проблем

### Приложение не запускается

- Убедитесь, что установлены все зависимости: `npm install`
- Проверьте, что контент скопирован: `ls app/content`

### API не работает

- Проверьте наличие JSON файлов в `app/content/api/`
- Запустите `node scripts/generate-api-json.js` для создания базовых файлов

### iOS приложение не загружает контент

- Убедитесь, что папка `content/` добавлена в Xcode проект как "folder reference"
- Проверьте пути в `AppDelegate.swift`

